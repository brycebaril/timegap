(function(){function _diff(start,end){start instanceof Date&&(start=start.getTime()),end instanceof Date&&(end=end.getTime());var ms=end-start,s=0,m=0,h=0,d=0,y=0,order=0>ms?-1:1;return ms=Math.abs(ms),y=0|ms/YEAR,ms-=y*YEAR,d=0|ms/DAY,ms-=d*DAY,h=0|ms/HOUR,ms-=h*HOUR,m=0|ms/MINUTE,ms-=m*MINUTE,s=0|ms/SECOND,ms-=s*SECOND,[order,y,d,h,m,s,ms]}function _multiFormat(start,end,max,bits){var max=max||1,d=_diff(start,end),o=d.shift(),out="",added=0;return bits.forEach(function(unit){if(!(added>=max)){var next=d.shift();0!=next&&(0==added&&(next*=o),out+=next+unit,added++)}}),out.length>0?out:"0"+bits.pop()}function diff_to_ms(start,end,max){return _multiFormat(start,end,max,["y","d","h","m","s","ms"])}function diff_to_s(start,end,max){return _multiFormat(start,end,max,["y","d","h","m","s"])}function diff_to_m(start,end,max){return _multiFormat(start,end,max,["y","d","h","m"])}function diff_to_h(start,end,max){return _multiFormat(start,end,max,["y","d","h"])}function diff_to_d(start,end,max){return _multiFormat(start,end,max,["y","d"])}function millis(start,end){return start instanceof Date&&(start=start.getTime()),end instanceof Date&&(end=end.getTime()),end-start+"ms"}function seconds(start,end){var d=_diff(start,end);console.log(d);var o=d.shift(),seconds=31536e3*d[0]+86400*d[1]+3600*d[2]+60*d[3]+d[4];return o*seconds+"s"}function minutes(start,end){var d=_diff(start,end),o=d.shift(),minutes=525600*d[0]+1440*d[1]+60*d[2]+d[3];return o*minutes+"m"}function hours(start,end){var d=_diff(start,end),o=d.shift(),hours=8760*d[0]+24*d[1]+d[2];return o*hours+"h"}function days(start,end){var d=_diff(start,end),o=d.shift(),days=365*d[0]+d[1];return o*days+"d"}function years(start,end){var d=_diff(start,end),o=d.shift();return o*d[0]+"y"}var SECOND=1e3,MINUTE=60*SECOND,HOUR=60*MINUTE,DAY=24*HOUR,YEAR=365*DAY;"undefined"!=typeof module&&"undefined"!=typeof require?(exports.diff_to_ms=diff_to_ms,exports.diff_to_s=diff_to_s,exports.diff=diff_to_s,exports.diff_to_m=diff_to_m,exports.diff_to_h=diff_to_h,exports.diff_to_d=diff_to_d,exports.millis=millis,exports.seconds=seconds,exports.minutes=minutes,exports.hours=hours,exports.days=days,exports.years=years,exports.diff_to_y=years):(window.diff_to_ms=diff_to_ms,window.diff_to_s=diff_to_s,window.diff=diff_to_s,window.diff_to_m=diff_to_m,window.diff_to_h=diff_to_h,window.diff_to_d=diff_to_d,window.millis=millis,window.seconds=seconds,window.minutes=minutes,window.hours=hours,window.days=days,window.years=years,window.diff_to_y=years)})();